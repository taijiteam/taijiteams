<!doctype html>
<html>
<head>
<meta charset="utf-8">
<!-- 防止手机点击放大问题 -->
<meta content="yes" name="apple-mobile-web-app-capable">
<meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
<!-- the end -->
<title>成员风采</title>
<link rel="stylesheet" href="__PUBLIC__/Merber/css/jquery-labelauty.css">
<style type="text/css">
body{
	background: #000;
	margin: 0;
	padding: 0;
	font-family:
}
a{
	color: #fff;
	text-decoration:none;
}
ul{
	padding-left: 0px;
	overflow: hidden;
	margin-top: 7px;
	margin-bottom: 5px;
}
li{
	list-style-type: none;
	margin: 0;
	padding: 0;
}
footer{
	position: fixed;
	bottom: 0px;
	width: 100%;
}
footer>ul{
	margin: 0;
	padding: 5px 0;
	background: rgb(35,35,35);
	overflow: hidden;
}
footer>ul>a>li{
	display: block;
	float: left;
	width: 25%;
	text-align: center;
	margin-left: 6.25%;
}
footer>ul>a>li>img{
	width: 25px;
}
footer>ul>a>li>span{
	display: block;
	text-align: center;
	font-size: 10px;
	color: rgb(248,194,84);
}
.list>.body{
	overflow: hidden;
	width: 100%;
	margin-bottom: 65px;
}
.list>.body>.nav{
	margin: 0;
	padding: 0;
	width: 100%;
	overflow: hidden;
	background: rgb(35,35,35);
	position: fixed;
}
.list>.body>.nav>li{
	font-size: 14px;
	width: 20%;
	display: block;
	float: left;
	text-align: center;
	margin: 0;
	padding: 10px 0;
}
.list>.body>.nav>li>a{
	color: #fff;
}
.swiper-slide{
	margin-top: 50px;
}
.swiper-slide>p{
	color: #fff;
	margin: 0 auto;
	width: 90%;
	font-size: 10px;
}
.swiper-slide>ul{
	overflow: hidden;
	width: 90%;
	margin: 0 auto;
	padding: 0;
}
.swiper-slide>ul>li{
	width: 100%;
	overflow: hidden;
	margin: 0 auto;
	padding: 10px 0;
	border-bottom: 1px solid rgb(151,151,151);
}
.swiper-slide>ul>li>a>span{
	width: 28.15%;
	height: 37.335vw;
	display: block;
	float: left;
	background: #ccc;
	margin-left: 2.374%;
}
.swiper-slide>ul>li>a>span>img{
	width: 100%;
}
.swiper-slide>ul>li>a>div{
	width: 63%;
	display: block;
	float: left;
	overflow: hidden;
	color: #fff;
	margin-left: 4%;
}
.swiper-slide>ul>li>a>div>h4{
	margin: 5px 0;
	font-size: 14px;
}
.swiper-slide>ul>li>a>div>h4>input{
	
	display: block;
	float: right;
	width: 30px;
	height: 30px;
	border: 1px solid #fff;
}
.swiper-slide>ul>li>a>div>p{
	margin: 3px 0;
	font-size: 12px;
}
.swiper-slide>ul>li>a>div>span{
	display: block;
	width: 65px;
	text-align: center;
	font-size: 12px;
	color: rgb(250,196,84);
	padding: 1px 4px;
	margin-top: 20px;
}
.swiper-slide>ul>li>a>div>object{
	display: block;
	text-align: right;
}
.swiper-slide>ul>li>a>div>object>a{
	color: rgb(248,194,84);
	font-size: 12px;
}
#starlist #selected {
	color: rgb(248,194,84);
}
.list>.back_to_top{
	width: 30px;
	height: 30px;
	position: fixed;
	bottom: 100px;
	right: 30px;
	border-radius: 15px;
	padding: 0;
	background: #00ff97;
	border: none;
}
.list>.back_to_top>img{
	width: 100%;
}
.body>.site{
	overflow: hidden;
	padding-top: 10px;
	position: fixed;
	top: 0px;
	left: 0px;
	right: 0px;
	background: #000;
}
#sure{
	right: 26%;
	background: #235d38;
	color: #fff;
	display: block;
	position: fixed;
	bottom: 60px;
	font-size: 14px;
	padding: 5px 65px;
	border-radius: 5px;
}
.body>.site>a>h4{
	width: 105px;
	line-height: 30px;
	margin: 0;
	background: #235d38;
	border-top-left-radius: 40px;
	border-bottom-left-radius: 10px;
	color: #fff;
	display: block;
	float: right;
	overflow: hidden;
}
.body>.site>a>h4>.left{
	font-size: 25px;
	display: block;
	float: left;
	margin-left: 15px;
	margin-right: 10px;
}
.body>.site>a>h4>.right{
	font-size: 14px;
	display: block;
	float: left;
	margin-top: 1.5px;
}
/**/
.aside{
	font: 14px/1.5 "Helvetica Neue",Helvetica,Arial,"Microsoft Yahei","Hiragino Sans GB","Heiti SC","WenQuanYi Micro Hei",sans-serif;
    color: #333;
} 
.aside,
.aside-overlay {
	position: fixed;
	top: 0; right: 0; bottom: 0; left: 0;
}
.aside {
    -webkit-transition: visibility .25s;
    transition: visibility .25s;
    z-index: 3;
    visibility: hidden;
    overflow: hidden;
}
.aside.active {
	-webkit-transition: none;
	transition: none;
	visibility: visible;
}
.aside-overlay {
    background-color: black;
    opacity: 0;
    -webkit-transition: opacity .25s;
    transition: opacity .25s;
}
.active > .aside-overlay {
	opacity: .6;
}
.aside .module-footer {
    position: absolute;
    left: 0; right: 0; bottom: 0;
}
.aside .module-footer .btn-primary:only-child {
    margin-bottom: 12px;
}
.aside .module-header {
    position: absolute;
    left: 0; right: 0; top: 0;
}
.aside .module-history {
    margin: 0;
    position: absolute;
    left: 0; top: 0; bottom: 0; right: 0;
}
.aside .module-main {
    position: absolute;
    left: 0; right: 0;
    top: 44px; bottom: 92px;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
}
.aside .scrollable {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
}
.aside-content {
    position: absolute;
    bottom: 0; right: 0;
    background-color: white;
    -webkit-transition: transform .15s;
    transition: transform .15s;
    left: 40px; top: 0;
    -webkit-transform: translateX(100%);
    transform: translateX(100%);
}
.active > .aside-content {
	-webkit-transform: translate(0%, 0%);
	transform: translate(0%, 0%);
}
.module-header {
    height: 28px;
    border-top: 16px solid transparent;
    padding: 0 1rem;
}
.module-header::after {
    content: '';
    display:table;
    clear:both;
}
.module-header-l {
    float: left;
}
.module-header-r {
    float: right;
    position: relative;
    min-width: 4rem;
}
.module-title {
    display: inline;
    font-weight: normal;
}
.module-title::before {
    content: '';
    height: 1em; width: 10px;
    display: inline-block;
    box-sizing: border-box;
    border-left: 2px solid #1d4a31;
    color: transparent;
    vertical-align: -.22ex;
}
.btn-tag {
    display: inline-block;
    line-height: 27px;
	margin: 10px 10px 10px 0;
    border: 1px solid;
    border-radius: 99px;
    padding: 0 10px;
    font-size: 13px;
    text-align: center;
	line-height: 20px;
	color: gray;
}
.btn-group {
    display: table;
    width: 100%;
    table-layout: fixed;
    margin-left: auto; margin-right: auto;
}
.btn-group-cell {
    display: table-cell;
    font-size: 100%;
    font-weight: 400;
}
.btn-reset,
.btn-submit {
	display: block;
	text-align: center;
	line-height: 44px;
	color: white;
	font-size: 16px;
}
.btn-reset {
	background-color: #5a5a5a;
}
.btn-submit {
	background-color: #37865a;
}
aside a:hover {
	text-decoration: none;
}

.noscroll,
.noscroll body {
    overflow: hidden;
}
.noscroll body {
    position: relative;
}
.module-main>h4{
	width: 100%;
	margin: 5px;
	color: #000;
	padding-left: 20px;
}
.dowebok{
	width: 90%;
	margin: 0 auto;
	list-style-type: none;
}
.dowebok>li {
	display: inline-block;
}
.dowebok>li {
	margin: 10px 0;
}
.site>.left1{
	display: block;
	float: left;
	overflow: hidden;
	margin-top: -10px;
}
.site>.left1>a{
	width: 25px;
	display: block;
	border: 2px solid #999;
	text-align: center;
	margin-left: 15px;
	margin-top: 10px;
	line-height: 25px;
}
.site>.left1>a>img{
	width: 20px;
}
input.labelauty + label { font: 12px "Microsoft Yahei";}
</style>
<link rel="stylesheet" href="__PUBLIC__/Activity/css/jflex.min.css" type="text/css" media="all">
<script type="text/javascript" src="__PUBLIC__/Activity/js/comm.js"></script>
	<script type="text/javascript" src="__PUBLIC__/Activity/move/jquery.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/Activity/move/Sortable.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/Activity/move/moduleSet.min.js"></script>
	<title>Document</title>
</head>
<body class="list">
<div class="body">
	<div class="site" id="back"><a href="javascript:" id="buttonWith" class="button"><h4><span class="left">«</span><span class="right">筛选</span></h4></a></div>
	<div class="swiper-slide">
		<p>按后台数据排序</p>
		<ul class="mui-table-view block__list block__list_words" id="listm">
			<volist name="mlist" id="mlist">
				<li class="mui-table-view-cell action-btn">
					<a href="{:U('Member/content')}?id={$mlist.m_id}">
						<span><img src="__PUBLIC__/Uploads/Member/{$mlist.m_img}"></span>
						<div>
							<h4>
								{$mlist.m_cname}
								<input type="checkbox" name="m_id" value="{$mlist.m_id}"/>
							</h4>
							<p>{$mlist['erji'][0]}</p>
							<p>{$mlist['erji'][1]}</p>
							<span>[ {$mlist.m_category} ]</span>
							<object><a href="{:U('Member/content')}?id={$mlist.m_id}">成员详情»</a></object>
						</div>
					</a>
				</li>
			</volist>
		</ul>
	</div>
</div>
<div id="suree"><a href="javascript:;" onclick="setupsecond()" id="sure">确认选择</a></div>
<button class="back_to_top"><img src="__PUBLIC__/Merber/images/icon/backtop.png"></button>
<include file="MemberPublic/footer" />
<!-- 筛选 -->
<aside id="aside" class="aside">
	<i class="aside-overlay hideAside"></i>
	<div class="aside-content">
		<div class="module module-filter-list">
			<div class="module-header">
				<h3 class="module-title">筛选</h3>
			</div>
			<div class="module-main scrollable">
				<h4>成员类别</h4>
				<ul class="dowebok">
					<!-- <li><input type="checkbox" class="checkbox" name="checkbox" disabled checked data-labelauty="HTML"></li> -->
					<li><input type="checkbox" class="checkbox" name="category" value="商政名流" data-labelauty="商政名流"></li>
					<li><input type="checkbox" class="checkbox" name="category" value="企业精英" data-labelauty="企业精英"></li>
					<li><input type="checkbox" class="checkbox" name="category" value="文艺雅仕" data-labelauty="文艺雅仕"></li>
					<li><input type="checkbox" class="checkbox" name="category" value="名医专家" data-labelauty="名医专家"></li>
					<!--<li><input type="checkbox" class="checkbox" name="category" value="会员类别" data-labelauty="会员类别"></li>-->
				</ul>
				<h4>性别</h4>
				<ul class="dowebok">
					<!-- <li><input type="checkbox" class="checkbox" name="checkbox" disabled checked data-labelauty="HTML"></li> -->
					<li><input type="radio" class="checkbox" name="sex" value="先生" data-labelauty="先生"></li>
					<li><input type="radio" class="checkbox" name="sex" value="女士" data-labelauty="女士"></li>
					<li><input type="radio" class="checkbox" name="sex" value="不限" checked data-labelauty="不限"></li>
				</ul>
			</div>
			<div class="module-footer">
				<nav class="btn-group">
					<div class="btn-group-cell"><a href="javascript:;" class="btn-reset hideAside">取消</a></div>
					<div class="btn-group-cell"><a href="javascript:;" onclick="setupfirst()" class="btn-submit hideAside">完成</a></div>
				</nav>
			</div>
		</div>
	</div>
</aside>
<link rel="stylesheet" type="text/css" href="__PUBLIC__/Project/css/H-ui.min.css" />
<script type="text/javascript" src="__PUBLIC__/Project/hui/lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/Project/hui/static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript">
// first
function setupfirst(){
	var category = Lond_ckecked('category');//
	var sex = $('input[name="sex"]:checked').val();//
	// alert(JSON.stringify(category));
	if(sex == '' && category == ''){
		$.Huimodalalert('警告：小样啥也没选就想筛选！！',2000);
	}else{
		$.ajax({
			type:"post",
			url:"{:U('Member/setupfirst')}",//根据自己项目的需要写请求地址
			data:{
				'category':category,
				'sex':sex,
			},
			dataType:'json',
			success:function(data){
				
				//alert(JSON.stringify(data));
				var html ='';
				for (var i=0;i<data.length;i++){
					mlist = data[i].erji;
					a = mlist[0];
					b = mlist[1];
					html += '<li class="mui-table-view-cell"><a href="{:U('Member/content')}?id='+data[i].m_id+'"><span><img src="__PUBLIC__/Uploads/Member/'+data[i].m_img+'"></span><div><h4>'+data[i].m_cname+'<input type="checkbox" name="m_id" value="'+data[i].m_id+'"/></h4><p>'+a+'</p><p>'+b+'</p><span>'+data[i].m_category+'</span><object><a href="{:U('Member/content')}?id='+data[i].m_id+'">成员详情»</a></object></div></a></li>';
				}
				$('#listm').html(html);
			},
			error:function(data) {
					console.log(data.msg);
			},
		})
	}
}
// second
function setupsecond(){
	var m_id = Lond_ckeck('m_id');//选中
	if(m_id == ''){
		var m_id = Lond_none('m_id');//all
	}
	//alert(JSON.stringify(m_id));
	$.ajax({
		type:"post",
		url:"{:U('Member/setupsecond')}",//根据自己项目的需要写请求地址
		data:{
			'm_id':m_id,
		},
		dataType:'json',
		success:function(data){
			//alert(JSON.stringify(data.erji));
			var html ='';
			var a = '';
			var b = '';
			for (var i=0;i<data.length;i++){
			 	var mlist = data[i].erji;
				a = mlist[0];
				//b = mlist[1];
				b = (mlist[1]==undefined ?"":mlist[1]);
				html += '<li class="mui-table-view-cell"><a href="{:U('Member/content')}?id='+data[i].m_id+'"><span><img src="__PUBLIC__/Uploads/Member/'+data[i].m_img+'"></span><div><h4>'+data[i].m_cname+'</h4><p>'+a+'</p><p>'+b+'</p><span>'+data[i].m_category+'</span><object><a href="{:U('Member/content')}?id='+data[i].m_id+'">成员详情»</a></object></div></a></li>';
			}
			var sure ='';//
			var back ='<div class="left1"><a href="javascript:;" onclick="back()"><img src="__PUBLIC__/Merber/images/icon/back.png"></a></div>';
			$('#suree').html(sure);
			$('#back').html(back);
			$('#listm').html(html);
		},
		error:function(data) {
				console.log(data.msg);
		},
	})
}
function Lond_none(objname){
	obj = document.getElementsByName(objname);
	checkval = [];
	for (var i = obj.length - 1; i >= 0; i--) {
		if(obj[i])
            checkval.push(obj[i].value);
	}
	return checkval;
}
function Lond_ckecked(objname){
	obj = document.getElementsByName(objname);
	checkval = [];
	for (var i = obj.length - 1; i >= 0; i--) {
		if(obj[i].checked)
            checkval.push(obj[i].value);
	}
	return checkval;
}
function Lond_ckeck(objname){
    obj = document.getElementsByName(objname);
    checkval = [];
    for(k in obj){
        if(obj[k].checked)
            checkval.push(obj[k].value);
    }
    return checkval;
}
</script>
<!--/_footer 作为公共模版分离出去-->
<!-- 请在上方写相关业务脚本 -->
<script src="__PUBLIC__/Merber/js/jquery-labelauty.js"></script>
<script>
function back()
{
	//window.history.back();
	location.assign(location);
}
$(function(){
	$('.checkbox').labelauty();
});
</script>
<!-- 上面筛选 -->
<script src="__PUBLIC__/Merber/js/hm.js"></script>
<script src="__PUBLIC__/Merber/js/zepto.min.js"></script>
<script>
var elButton = $('#button'), elButtonWith = $('#buttonWith');
var elAside = $('#aside');
elButton.on('click', function () {
	elAside.addClass('active');
	$('html').addClass('noscroll');
});
elButtonWith.on('click', function() {
	elAside.addClass('active');
	$.smartScroll(elAside, '.scrollable');
	elButton.html(elButton.html().replace('没有', '已经'));
	$('html').addClass('noscroll');
});

$('.hideAside').on('click', function () {
	$('html').removeClass('noscroll');
	elAside.removeClass('active');
});
$.smartScroll = function(container, selectorScrollable) {
	// 如果没有滚动容器选择器，或者已经绑定了滚动时间，忽略
	if (!selectorScrollable || container.data('isBindScroll')) {
		return;
	}
	// 是否是搓浏览器
	// 自己在这里添加判断和筛选
	var isSBBrowser;

	var data = {
		posY: 0,
		maxscroll: 0
	};
	// 事件处理
	container.on({
		touchstart: function (event) {
			var events = event.touches[0] || event;
			// 先求得是不是滚动元素或者滚动元素的子元素
			var elTarget = $(event.target);
			if (!elTarget.length) {
				return;
			}
			var elScroll;
			// 获取标记的滚动元素，自身或子元素皆可
			if (elTarget.is(selectorScrollable)) {
				elScroll = elTarget;
			} else if ((elScroll = elTarget.parents(selectorScrollable)).length == 0) {
				elScroll = null;
			}
			if (!elScroll) {
				return;
			}
			// 当前滚动元素标记
			data.elScroll = elScroll;
			// 垂直位置标记
			data.posY = events.pageY;
			data.scrollY = elScroll.scrollTop();
			// 是否可以滚动
			data.maxscroll = elScroll[0].scrollHeight - elScroll[0].clientHeight;
		},
		touchmove: function (event) {
			// 如果不足于滚动，则禁止触发整个窗体元素的滚动
			if (data.maxscroll <= 0 || isSBBrowser) {
				// 禁止滚动
				event.preventDefault();
			}
			// 滚动元素
			var elScroll = data.elScroll;
			// 当前的滚动高度
			var scrollTop = elScroll.scrollTop();
			// 现在移动的垂直位置，用来判断是往上移动还是往下
			var events = event.touches[0] || event;
			// 移动距离
			var distanceY = events.pageY - data.posY;
			if (isSBBrowser) {
				elScroll.scrollTop(data.scrollY - distanceY);
				elScroll.trigger('scroll');
				return;
			}
			// 上下边缘检测
			if (distanceY > 0 && scrollTop == 0) {
				// 往上滑，并且到头
				// 禁止滚动的默认行为
				event.preventDefault();
				return;
			}
			// 下边缘检测
			if (distanceY < 0 && (scrollTop + 1 >= data.maxscroll)) {
				// 往下滑，并且到头
				// 禁止滚动的默认行为
				event.preventDefault();
				return;
			}
		},
		touchend: function () {
			data.maxscroll = 0;
		}
	});
	// 防止多次重复绑定
	container.data('isBindScroll', true);
};
</script>
<script type="text/javascript">
var backButton=$('.back_to_top');
function backToTop() {
	$('html,body').animate({
		scrollTop: 0
	}, 800);
}
backButton.on('click', backToTop);

$(window).on('scroll', function () {/*当滚动条的垂直位置大于浏览器所能看到的页面的那部分的高度时，回到顶部按钮就显示 */
	if ($(window).scrollTop() > $(window).height())
		backButton.fadeIn();
	else
		backButton.fadeOut();
});
$(window).trigger('scroll');/*触发滚动事件，避免刷新的时候显示回到顶部按钮*/
</script>
<script>

	//解决安卓端长按时出现浏览器选择打开问题
	document.oncontextmenu=function(e){
		//或者return false;
		e.preventDefault();
	};
	var elementsld;
	var touch={};
	touch.current=0;
	touch.lenght=4;
	function move(elem,targetW,current){
		elem.animate({
			translate3d: targetW *current + "px,0,0"
		},300,'steps',function(){
		});
	}

	var sort = Sortable.create(document.getElementById('foo'), {
		disabled: true,
		animation: 150,
		onStart: function(){
			Zepto("#foo").removeClass("animationframes")
		},
		onEnd: function () {

			sort.options.disabled = true
			longtap = false
			console.log(elementsld);
			elementsld.css("background-color","");
			touchmove = true

		}
	})

	var longtap = false
	jQuery('#foo li').on("taphold", function (e) {
		elementsld = $(this);
		elementsld.css("background-color","#46b99f");
		longtap = true;
		this.bind('contextmenu', function (e) {
			e.preventDefault();
		},false)
	})
	Zepto('#foo li').on('touchstart', function (e) {
		setTimeout(function () {
			if (longtap) {
				<!-- var selectId = $('#foo li').attr("id") -->
				<!-- document.getElementById(selectId).setAttribute("class", "animationframes"); -->
				<!-- document.getElementById("foo").setAttribute("class", "animationframes"); -->
				console.log('longtap')
				sort.options.disabled = false
				sort._onTapStart(e)
			}
		}, 1000);
	})
</script>
</body>
</html>
